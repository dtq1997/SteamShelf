# Steam Notes Generator — 更新日志

## v6.2 (2026-02-14)
- **架构重设计 — 阶段 3**：
  - 拆分 `ui_ai_batch.py`（1974 行）为 5 个文件（总计 ~2190 行，含结构开销）：
    - `ui_ai_batch.py` (~100行) — 精简入口编排器（AIBatchMixin）
    - `ui_ai_batch_state.py` (~80行) — 共享状态对象，替代闭包可变列表
    - `ui_ai_batch_window.py` (~270行) — 窗口框架、令牌选择、Cloud连接、提示词
    - `ui_ai_batch_list.py` (~1050行) — 游戏列表、扫描、筛选、调试、笔记预览
    - `ui_ai_batch_generation.py` (~690行) — 生成任务管理（暂停/继续/停止/上传/关闭）
  - 消除约 60 个嵌套闭包，改为模块级函数 + AIBatchState 实例属性
  - 消除可变列表状态传递（`active_token_idx[0]` → `state.active_token_idx`）
  - `main.py` 导言区更新项目架构说明

## v6.1 (2026-02-14)
- **架构重设计 — 阶段 2**：
  - 新增 `config_manager.py` — 配置持久化统一管理（从 ui_app.py 分离）
    包含：ConfigManager 类，统一管理令牌/上传哈希/名称缓存/通用配置
  - 新增 `vdf_parser.py` — VDF 文件解析（从 ui_app.py 分离）
    包含：parse_remotecache_syncstates(), is_app_uploading()
  - `ui_app.py` 配置相关逻辑委托给 ConfigManager，VDF 解析委托给 vdf_parser
  - `main.py` 导言区更新项目架构说明
- **代码质量修复**：
  - `account_manager.py` 3 处 bare except 改为具体异常类型
  - `ui_app.py` bare except 改为具体异常类型
  - `ui_app.py` _load_config/_save_config 异常类型从 Exception 收窄

## v6.0 (2026-02-13)
- **架构重设计**：
  - 新增 `utils.py` — 公共工具函数（SSL/urlopen），消除 3 处重复代码
  - 新增 `steam_data.py` — Steam 数据获取（从 ai_generator.py 分离）
  - 新增 `CHANGELOG.md` — 更新日志从 main.py 导言区独立
  - `main.py` 导言区精简：保留架构说明+开发规范+AI指引，移除冗长更新日志
  - `ui.py` → `ui_app.py` 重命名（更清晰的命名）
  - 新增开发规范 #24 公共工具统一
- **代码质量修复**：
  - `core.py` bare except 改为具体异常类型
  - `cloud_uploader.py` 新增公开方法 `is_alive()`，避免外部访问私有方法

## v5.9.6 (2026-02-13)
- 上传中状态保护：syncstate=3 的笔记全面禁止修改
- 主界面筛选新增「☁️⬆上传中」勾选框
- AI 批量生成界面同步显示上传中标记

## v5.9.5 (2026-02-13)
- Anthropic 联网搜索质量根治：搜索-写作分离两步法
- 彻底解决联网搜索输出质量差的问题

## v5.9.4 (2026-02-13)
- 上传中状态显示：解析 remotecache.vdf 中的 syncstate

## v5.9.3 (2026-02-11)
- AI 笔记预览窗口关闭按钮修复、质量显示修复

## v5.9.2 (2026-02-11)
- 修复第三方代理泄露原始工具调用标记的问题

## v5.9.1 (2026-02-11)
- 联网搜索前缀清理 + "游戏总体质量"字段名修正

## v5.9 (2026-02-11)
- AI 质量评估系统（💎✨➖👎💀）
- 多语言搜索策略
- UI 筛选行拆分为 3 行

## v5.8 (2026-02-11)
- 主界面筛选器重构（并列筛选）
- 列表信息来源 emoji

## v5.7.2 (2026-02-11)
- UI 代码拆分为 6 个 Mixin 文件

## v5.7.1 (2026-02-11)
- 家庭库扫描缓存

## v5.7 (2026-02-11)
- AI 笔记信息量标注 + 信息过少标注性笔记

## v5.6 (2026-02-10)
- 家庭组默认视图改为并集 + 游戏名称获取进度条

## v5.5 (2026-02-10)
- 家庭组游戏筛选 + 免费游戏缓存

## v5.4 (2026-02-09)
- 启动性能优化（后台加载 + 持久化缓存）

## v5.3.1 (2026-02-09)
- 右侧面板紧凑化

## v5.3 (2026-02-09)
- 主界面 UI 大幅重排 + 导入冲突双模式 + 笔记去重

## v5.2.1 (2026-02-09)
- Cloud 断开清理状态 + 账号不匹配拒绝连接

## v5.2 (2026-02-09)
- 导入确认窗口优化 + 游戏名称扫描重做 + 导出 AI 筛选 + Cloud 账号检测

## v5.1 (2026-02-09)
- 主界面大幅优化 + 游戏名称显示 + 搜索功能

## v5.0 (2026-02-09)
- AI 批量生成：暂停/继续/停止 + 关闭时上传提示

## v4.x (2026-02-09)
- 多令牌管理、导出功能增强、Steam 评测接入、联网搜索、确信度筛选等

## v3.x (2026-02-08)
- 持久化配置、AI 前缀识别、Steam 分类筛选、Cloud 直接上传等

## v2.x (2026-02-06~07)
- GUI 版本、富文本编辑器、AI 批量生成、多提供商支持等
